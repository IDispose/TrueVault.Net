<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Truevault-net by hsrob</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Truevault-net</h1>
        <p>.NET wrapper for the TrueVault API</p>
        <p class="view"><a href="https://github.com/hsrob/truevault-net">View the Project on GitHub <small>hsrob/truevault-net</small></a></p>
        <ul>
          <li><a href="https://github.com/hsrob/truevault-net/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/hsrob/truevault-net/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/hsrob/truevault-net">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a name="truevault-net" class="anchor" href="#truevault-net"><span class="octicon octicon-link"></span></a>truevault-net</h1>

<p>.NET wrapper for the TrueVault API</p>

<h3>
<a name="what-is-truevault-and-what-is-this-library" class="anchor" href="#what-is-truevault-and-what-is-this-library"><span class="octicon octicon-link"></span></a>What is TrueVault, and what is this library?</h3>

<p>TrueVault is a Secure API to store health data. See their website at <a href="https://www.truevault.com">https://www.truevault.com</a> for more information.</p>

<p>This library is a simple, strongly-typed .NET wrapper around TrueVault's RESTful API.</p>

<h3>
<a name="features-white_check_mark-completed-and-heavy_minus_sign-planned" class="anchor" href="#features-white_check_mark-completed-and-heavy_minus_sign-planned"><span class="octicon octicon-link"></span></a>Features (<img class="emoji" title=":white_check_mark:" alt=":white_check_mark:" src="https://github.global.ssl.fastly.net/images/icons/emoji/white_check_mark.png" height="20" width="20" align="absmiddle"> Completed and <img class="emoji" title=":heavy_minus_sign:" alt=":heavy_minus_sign:" src="https://github.global.ssl.fastly.net/images/icons/emoji/heavy_minus_sign.png" height="20" width="20" align="absmiddle"> Planned)</h3>

<ul>
<li>
<img class="emoji" title=":white_check_mark:" alt=":white_check_mark:" src="https://github.global.ssl.fastly.net/images/icons/emoji/white_check_mark.png" height="20" width="20" align="absmiddle"> JSON Document Store API</li>
<li>
<img class="emoji" title=":heavy_minus_sign:" alt=":heavy_minus_sign:" src="https://github.global.ssl.fastly.net/images/icons/emoji/heavy_minus_sign.png" height="20" width="20" align="absmiddle"> BLOB Store API</li>
<li>
<img class="emoji" title=":heavy_minus_sign:" alt=":heavy_minus_sign:" src="https://github.global.ssl.fastly.net/images/icons/emoji/heavy_minus_sign.png" height="20" width="20" align="absmiddle"> Search Schema API</li>
</ul><h3>
<a name="external-dependencies" class="anchor" href="#external-dependencies"><span class="octicon octicon-link"></span></a>External Dependencies</h3>

<blockquote>
<p><strong>Client Library</strong></p>

<ul>
<li>ServiceStack.Text 3.9.71</li>
<li>AutoMapper 3.1.1</li>
</ul>
<p><strong>Test Project</strong></p>

<ul>
<li>NBuilder 3.0.1.1</li>
<li>NUnit 2.6.3</li>
</ul>
</blockquote>

<h1>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage</h1>

<h2>
<a name="instantiation" class="anchor" href="#instantiation"><span class="octicon octicon-link"></span></a>Instantiation</h2>

<p>Create a new instance of the TrueVault client, passing in your TrueVault API key, and you're ready to go!</p>

<div class="highlight highlight-csharp"><pre><span class="kt">var</span> <span class="n">trueVaultClient</span> <span class="p">=</span> <span class="k">new</span> <span class="n">TrueVaultClient</span><span class="p">(</span><span class="s">"{TrueVault API Key}"</span><span class="p">);</span>
</pre></div>

<h2>
<a name="json-document-store-api" class="anchor" href="#json-document-store-api"><span class="octicon octicon-link"></span></a>JSON Document Store API</h2>

<h3>
<a name="creating-a--document" class="anchor" href="#creating-a--document"><span class="octicon octicon-link"></span></a>Creating a  Document</h3>

<p>This library automatically handles Base64 conversion and serialization. You only need to pass an instance of Type <code>T</code> to save it to TrueVault. <code>T</code> can be any class with a parameterless constructor.</p>

<p>A document can be created with or without the optional <code>schemaId</code> parameter. While this library (currently) does not support creating search Schemas, you can still create one yourself, then pass its ID into the appropriate overloaded <code>CreateDocument&lt;T&gt;</code> method.</p>

<h3>
<a name="getting-documents" class="anchor" href="#getting-documents"><span class="octicon octicon-link"></span></a>Getting Document(s)</h3>

<p><code>GetDocument&lt;T&gt;</code> is used to retrieve a single document from TrueVault, and will directly return an instance of Type <code>T</code>. Base64 conversion and deserialization is handled for you.</p>

<p><code>MultiGetDocuments&lt;T&gt;</code> retrieves a <code>MultiDocumentResponse</code>, which contains a list of <code>DocumentResponse</code> in its <code>Documents</code> property. You can use the <code>DeserializeDocuments&lt;T&gt;</code> method to extract and return the wrapped document instances as Type <code>T</code>.</p>

<p>Each <code>DocumentResponse</code> exposes a <code>DeserializeDocument&lt;T&gt;</code> method, which extracts and returns the individual document as Type <code>T</code>. <code>DocumentResponse</code> contains the TrueVault document ID in its <code>Id</code> property, as well as the raw serialized Base64 encoded JSON string in its <code>Document</code> property.</p>

<h3>
<a name="exception-handling" class="anchor" href="#exception-handling"><span class="octicon octicon-link"></span></a>Exception Handling</h3>

<p>When the library catches a <code>WebException</code>, it will make an attempt to parse and unwrap the <code>error</code> object in an error response from TrueVault. It will throw a new <code>WebException</code> with the original exception in the <code>InnerException</code> property, and a message formatted as follows, where <code>response</code> is the error response body returned by TrueVault.</p>

<p><code>TrueVault Transaction ID {response.transaction_id} - {HTTP Status Code} Error (Type: {response.error.type}) [Code: {response.error.code}]: {response.error.message}</code></p>

<h2>
<a name="running-the-tests" class="anchor" href="#running-the-tests"><span class="octicon octicon-link"></span></a>Running the Tests</h2>

<p>Update App.config in the TrueVault.Net.Test project with the values you wish to use for testing. Please note that the tests use the TrueVault API, so you may incur a small amount of usage by running them. Per the license, you agree that I cannot be held responsible for any usage charges, fees, overages, etc. you may incur by running the tests.</p>

<h1>
<a name="contributing" class="anchor" href="#contributing"><span class="octicon octicon-link"></span></a>Contributing</h1>

<p>Pull requests are welcome. If you're planning on adding a major feature, please contact me first to make sure it fits with the direction of the library, and that I'm not already working on it!</p>

<h1>
<a name="legal" class="anchor" href="#legal"><span class="octicon octicon-link"></span></a>Legal</h1>

<p>This library is made available under The MIT License. By using this library, you agree to the terms of that license.</p>
      </section>
    </div>
    <footer>
      <p>Project maintained by <a href="https://github.com/hsrob">hsrob</a></p>
      <p>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
    </footer>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-35498989-4");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>